plugins {
    id 'java'
    id 'groovy'
    id 'io.micronaut.application' version '1.4.2'
}

group 'org.example'
version '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

micronaut {
    version = "2.5.1"
    runtime "netty"
}
mainClassName = 'com.exacaster.lighter.Application'


dependencies {
    annotationProcessor "io.micronaut:micronaut-validation"
    annotationProcessor "io.micronaut.openapi:micronaut-openapi"

    implementation "io.micronaut:micronaut-validation"
    implementation "io.swagger.core.v3:swagger-annotations"

    implementation 'org.apache.spark:spark-launcher_2.12:3.1.1'
    implementation 'io.kubernetes:client-java:12.0.1'

    runtimeOnly "io.micronaut.micrometer:micronaut-micrometer-core"
    runtimeOnly "io.micronaut.micrometer:micronaut-micrometer-registry-prometheus"
    runtimeOnly "io.micronaut:micronaut-management"

    runtimeOnly 'ch.qos.logback:logback-classic:1.3.0-alpha5'


    testImplementation 'io.micronaut:micronaut-inject-groovy'
    testImplementation 'io.micronaut.test:micronaut-test-spock'
}
tasks.withType(JavaCompile) {
    options.fork = true
    options.forkOptions.jvmArgs << '-Dmicronaut.openapi.views.spec=rapidoc.enabled=true,swagger-ui.enabled=true,swagger-ui.theme=flattop'

}
test {
    useJUnitPlatform()
}